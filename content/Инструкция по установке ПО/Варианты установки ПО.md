
Программный продукт включает в себя 2 основные части:

- Интерфейс пользователя
- База данных продукта и вычислительная часть

В связи с этим существует два основных варианта установки дистрибутива.

_Первый вариант_ – установка двух частей на персональную рабочую станцию (для упрощения установки и только для однопользовательского режима работы). Такой вариант не рекомендуется и следует использовать только для случая тестирования продукта или при необходимости работы вне корпоративной сети (на буровой, в командировке, в самолете и т.д.)

_Второй вариант установки_ подразумевает установку интерфейсной части на пользовательской рабочей станции, а часть БД и вычислительную часть – на корпоративный Linux-сервер (кластер). Такой вариант подразумевает работу в многопользовательском режиме с одной базой данных, значительное ускорение всех расчетов и является наиболее предпочтительным.

Общее время первичной установки около 10 минут. Дальнейшее обновление любой из частей продукта требует не более 1 минуты.





## 3. Установка виртуальной машины Podman для Windows (около 10 мин) и интерфейсной части Podman (опционально)

**Podman** — это проект с открытым исходным кодом для автоматизации развертывания приложений в виде переносимых автономных контейнеров, выполняемых в облаке или локальной среде. Podman является аналогом продукта Docker, но является полностью бесплатным в любых конфигурациях, разрабатывается инженерами Red Hat и сообществом открытого программного обеспечения ([podman.io](https://podman.io/)). Для лицензирования используется открытая лицензия [Apache 2.0](https://www.apache.org/licenses/LICENSE-2.0).

**Требования к системе для работы на Windows****:**

– windows 10 или 11 (т.к. используется система виртуализации WSL)

– процессор на базе архитектуры x64 или amd64, других требований к процессору нет. Основное правило – чем больше ядер для параллельных вычислений, тем быстрее будут происходить все вычисления в продукте. Зависимость условно-линейная.

– для тестирования и использования на маленьких проектах до 100 скважин и не более 2Гб данных – 16Гб RAM (Windows и Podman обычно занимают около 12Гб RAM, поэтому на Гамму остается около 2-4Гб – необходимо учитывать)

– для тестирования и использования на небольших проектах до 200 скважин и не более 5Гб данных – 32Гб RAM

– для использования с большими проектами, рекомендуется использовать Linux или иметь не менее 64Гб RAM

Для установки Podman рекомендуем воспользоваться официальной инструкцией, расположенной по следующему адресу:

[https://github.com/containers/podman/blob/main/docs/tutorials/podman-for-windows.md](https://github.com/containers/podman/blob/main/docs/tutorials/podman-for-windows.md)

Далее будет кратко изложен процесс установки, но рекомендуем пользоваться описанием с официального сайта, т.к. оно всегда актуально.

Сначала необходимо скачать дистрибутив сервера Podman со страницы с последними дистрибутивами (на момент написания Podman 4.5.1):

[https://github.com/containers/podman/releases](https://github.com/containers/podman/releases)

![](https://gamma-wellbore.com/wp-content/uploads/2023/06/2023-06-06_15h33_06.png)

Далее запускаем скаченный установщик и начинаем процесс:

![](https://gamma-wellbore.com/wp-content/uploads/2023/06/2023-06-06_15h34_20.png)

Установка должна занять не более нескольких минут.

Вместе с установкой Podman будет также установлена система виртуализации WSL, если она не была установлена ранее.

Как только установка Podman завершилась, необходимо запустить командную строку:

![](https://gamma-wellbore.com/wp-content/uploads/2023/06/2023-06-06_15h41_09.png)

и запустить в ней следующую команду для запуска виртуальной машины Podman:

podman machine init

![](https://gamma-wellbore.com/wp-content/uploads/2023/06/2023-06-06_15h44_42.png)

(**не обязательно**) Далее при необходимости можно настроить конфигурацию вашей виртальной машины. Команды для этого описаны здесь: 

[https://docs.podman.io/en/latest/markdown/podman-machine-init.1.html](https://docs.podman.io/en/latest/markdown/podman-machine-init.1.html)

Последним шагом запускаем только что созданную виртуальную машину используя следующую команду:

podman machine start

![](https://gamma-wellbore.com/wp-content/uploads/2023/06/2023-06-06_15h48_37.png)

Вы успешно завершили установку вашего Linux сервера!

Если же вы увидели следующую ошибку (Ошибка безопасности/Unauthorized Access):

![](https://gamma-wellbore.com/wp-content/uploads/2023/06/2023-06-06_15h50_31.png)

Это означает, что в вашей версии Windows  выполнение сценариев Windows в системе запрещено. И чтобы эту ошибку устранить, необходимо дать возможность установки из неавторизованных источников:

Set-ExecutionPolicy Unrestricted

После этого можно запустить команду:

podman machine start

Однако, вы подвергаете систему риску, так что по окончании работы скрипта, верните политику выполнения назад в ограниченный режим. Сделать это можно с помощью следующей команды:

Set-ExecutionPolicy Restricted

## Установка приложения (интерфейса) Podman (опционально)

Для установки интерфейсной части Podman необходимо зайти на сайт приложения:

https://podman-desktop.io/downloads

И скачать оттуда соответствующий дистрибутив:

![](https://gamma-wellbore.com/wp-content/uploads/2023/06/2023-06-06_16h07_43-1024x407.png)

После установки дистрибутива, приложение можно будет открыть и увидеть следующее окно:

![](https://gamma-wellbore.com/wp-content/uploads/2023/06/2023-06-06_16h09_34-1024x685.png)

## 4. Установка Podman на Linux (около 5 мин)

Продукт Docker официально поддерживает следующие операционные системы: Ubuntu, Debian, Fedora, Arch, Manjaro, Alpine, CentOS и другие. Полный список всех поддерживаемых систем и подробные  инструкции для установки для каждой из них представлены на официальном сайте:

[https://podman.io/docs/installation](https://podman.io/docs/installation)

Требования к системе для работы на Linux:

– для тестирования и использования на не больших проектах до 200 скважин и не более 5Гб данных – 16Гб RAM

– для использования с большими проектами, рекомендуется иметь не менее 32Гб RAM

– специфических требований к процессору нет, основное правило – чем больше ядер для параллельных вычислений, тем быстрее будут происходить все вычисления в продукте. Зависимость условно-линейная.

## 5. Установка серверной части Gamma (около 2 мин)

Инсталляции серверной части, поставляется в архиве **gamma****_server****_full_podman****.zip**. В данном архиве содержаться следующие папки и файлы:

![](https://gamma-wellbore.com/wp-content/uploads/2023/06/2023-06-06_16h16_11.png)

Для установки (развертывания) образов Podman необходимо зайти в папку **Scripts** и запустить файл build_gamma.sh (Linux установщик) или build_gamma.ps1 (windows установщик Windows PowerShell):

![](https://gamma-wellbore.com/wp-content/uploads/2023/06/2023-06-06_16h19_14.png)

И подождать пару минут (в зависимости от производительности рабочей станции или сервера). В результате, в Podman должна появиться группа контейнеров “gamma”: “gamma_celery”, “gamma_redis” и один технический контейнер с произвольным названием. Все 3 контейнера должны работать постоянно:

![](https://gamma-wellbore.com/wp-content/uploads/2023/06/2023-06-06_16h23_58-1024x685.png)

Наличие трех запущенных контейнеров в Podman говорит о том, что эта процедура завершена успешно.

При включении рабочей станции Podman стартует автоматически. Если этот автоматический вариант не подходит, то для ручного запуска можно использовать скрипт start_gamma.ps1 (Windows), а также делать это вручную в Podman Desktop.

## 6. Прописать адрес сервера на рабочей станции для Windows (около 1 мин)

Если база данных и расчетная часть установлена на отдельном сервере (_второй вариант установки_), то необходимо указать IP адрес сервера, для связи между интерфейсной частью и удаленной базой данных.

Для этого, нужно добавить новую переменную окружения CELERY_REDIS_HOST = IP адрес сервера

Пример такой конфигурации для IP адреса 192.168.0.10:

![](http://gamma-wellbore.com/wp-content/uploads/2023/02/image6-1.png)

В случае если интерфейсная часть программы и база данных установлены на одном компьютере, то ничего прописывать в переменных окружения не нужно.

## 7. Установка дистрибутива пользовательского интерфейса для Windows

Системные требования к пользовательской части ПО Гамма отсутствуют, однако необходимо убедиться в наличии установленных драйверов OpenGL (команда dxdiag в меню «выполнить»). При этом видеокарта должна поддерживать версию OpenGL 4.3 или выше. Это требование выполняется практически для всех современных компьютеров, включая самые бюджетные модели. Процесс проверки версии OpenGL можно найти ниже в этой инструкции.

С целью упрощения процедуры установки на этапе тестирования и облегчения задачи обновления продукта при совместной активной разработке с Заказчиком, интерфейсная часть предоставляется в виде запакованного архива с именем **gamma****_client****.zip** и не требует установки.

Данный архив необходимо распаковать в любую папку на рабочей станции пользователя и запустить файл **GammaGui.exe**

![](http://gamma-wellbore.com/wp-content/uploads/2023/02/image7-1.png)

Только при первом запуске ПО возникнет окно с предупреждением, что у продукта нет электронной подписи от Микрософт. К сожалению, получение данной подписи с действующими в данный момент в России санкционными ограничениями затруднительно:

![](https://gamma-wellbore.com/wp-content/uploads/2023/02/2023-03-27_08h32_45-e1679888190168.png)

Для запуска ПО достаточно нажать “More Info” (Больше информации). Далее нажать на появившуюся кнопку “Run Anyway” (Все равно запустить). Делать это нужно только первый раз при запуске дистрибутива. В дальнейшем подобное сообщение появляться не будет.

![](https://gamma-wellbore.com/wp-content/uploads/2023/02/2023-03-27_08h32_52-e1679888314598.png)

В результате появится главное окно продукта:

![](https://gamma-wellbore.com/wp-content/uploads/2023/02/2023-03-27_08h40_21-1024x614.png)

Поздравляем, можно начинать работать.

## 8. Установка дистрибутива пользовательского интерфейса для актуальных версий Linux (Ubuntu, Debian, Fedora, Arch)

Скачать последний дистрибутив по ссылке:

![Значок](https://gamma-wellbore.com/wp-content/plugins/download-manager/assets/file-type-icons/zip.svg)

### [Client_linux](https://gamma-wellbore.com/download/client_linux/)

 1 файл(ы)  45 МБ

[Скачать](https://gamma-wellbore.com/gamma_help/installation/#)

Разархивировать архив стандартными средствами и перейти в терминале по в распакованную папку:

![](https://gamma-wellbore.com/wp-content/uploads/2023/02/image_2023-03-27_08-49-45.png)

Перед запуском ПО Гамма необходимо указать IP адрес серверной части приложения следующей командой:

export CELERY_REDIS_HOST=X.X.X.X       где X.X.X.X – IP машины запущенной в докере серверной частью

И прописать в явном виде где нужно искать недостающие библиотеки (в текущей папке с ПО):

export LD_LIBRARY_PATH=путь к текущей папке

команда pwd выводит полный путь к текущей папке, его можно скопировать.

Далее ПО запускается стандартной для Linux командой: ./GammaGui (перед / обязательно нужно поставить  точку).

Все команды и порядок их запуска:

![](https://gamma-wellbore.com/wp-content/uploads/2023/02/image_2023-03-27_08-58-22-e1679889959677.png)

Запущенный продукт выглядит полностью аналогично интерфейсу в Windows:

![](https://gamma-wellbore.com/wp-content/uploads/2023/02/image_2023-03-27_08-59-27-1024x579.png)

Поздравляем, можно работать в ПО Гамма в Линуксе.

## 9. Установка дистрибутива пользовательского интерфейса для Astra Linux

Российская версия Linux  (Astra Linux) немного отличается от других версий процессом установки в связи с небольшим отставанием в используемых технологиях и драйверах. Однако в связи с актуальностью применения именно этой версии в России, мы сделали процесс запуска ПО наиболее простым. Ниже представлены основные шаги.

По умолчанию Астра Линукс имеет в составе старые библиотеки QT. Прежде чем запускать ПО Гамма, необходимо их обновить.

Для этого, запускаем менеджер пакетов Synaptic (Пуск -> Системные -> Менеджер пакетов Synaptic):

![](https://gamma-wellbore.com/wp-content/uploads/2023/03/Screenshot_20230327_101122-1024x576.png)

Затем добавляем дополнительные репозитории от поставщика ОС Астра Линукс (настройки -> Репозитории), добавляем все из списка:

![](https://gamma-wellbore.com/wp-content/uploads/2023/03/Screenshot_20230327_101203-1024x576.png)

После этого ищем библиотеку qt5-default и обновляем ее вместе со всеми связанными пакетами:

![](https://gamma-wellbore.com/wp-content/uploads/2023/03/Screenshot_20230327_101234-1024x576.png)

Когда библиотеки ОС обновлены, скачиваем дистрибутив  ПО Гамма, специально подготовленный для Astra Linux:

![Значок](https://gamma-wellbore.com/wp-content/plugins/download-manager/assets/file-type-icons/zip.svg)

### [Client_astralinux](https://gamma-wellbore.com/download/release/)

 1 файл(ы)  1 МБ

[Скачать](https://gamma-wellbore.com/gamma_help/installation/#)

После скачивания архив необходимо разархивировать в любую удобную пользователю папку и перейти в терминале в эту папку.

![](https://gamma-wellbore.com/wp-content/uploads/2023/03/Screenshot_20230327_092138-e1679893219815.jpg)

Далее необходимо запустить установщик следующей командой:

sudo dpkg -i “название.deb”

например:

sudo sudo dpkg -i “gamma_1.0.5_amd64.deb”

![](https://gamma-wellbore.com/wp-content/uploads/2023/03/Screenshot_20230327_093612-1024x143.png)

В результате установки на рабочем столе появится иконка “Гамма”:

![](https://gamma-wellbore.com/wp-content/uploads/2023/03/Screenshot_20230327_094259-1024x576.png)

Если серверная часть ПО находится на той же рабочей станции, что и клиентская, то далее ничего делать не нужно. Можно запускать ПО и пользоваться.

В случае если Docker и серверная часть установлены на другой станции или кластере (рекомендуется), то необходимо один раз настроить IP адрес подключения к БД Гамма (Docker). Для этого открыть папку с установленным ПО:

/opt/gamma/bin/

Открыть и отредактировать в любом текстовом редакторе скрипт-файл:

start-gamma-client.sh

В нем необходимо прописать адрес сервера Докера в строке:

export CELERY_REDIS_HOST=”Написать IP адрес станции с Docker”

![](https://gamma-wellbore.com/wp-content/uploads/2023/02/Screenshot_20230327_152527.png)

Поздравляем, теперь можно открывать продукт Гамма с рабочего стола с помощью обычного ярлыка и начинать работу!

## 10. Часто используемые команды Docker (Linux)

Проверить версию Podman: **podman –version**

Справка: **podman –help**

Список запущенных контейнеров: **podman ps**

Остановить конкретный контейнер: **podman stop gamma_celery**

## 11. Автоматический запуск Podman и Gamma при старте ОС

Сделать это можно следующими способами:  
– c помощью systemd в Linux и launchd в macOS: посредством запуска скрипта start_gamma.sh  
– через запуск скрипта start_gamma.ps1 планировщиком Windows, добавив в него задачу скриптом start_with_windows.ps1  
Если вы инсталлировали Podman впервые и не настраивали ранее автоматический старт виртуальной машины Podman, то сделать это можно на всех ОС такими способами:  
– раскомментировав строку “podman machine start” в скрипте start_gamma  
– опцией “Engine autostart” в настройках Podman Desktop

## 12. Перенос и резервное копирование данных

Данные операции являются стандартной частью продукта Podman и описаны на официальном сайте:

[https://docs.podman.io/en/latest/markdown/podman-volume-export.1.html](https://docs.podman.io/en/latest/markdown/podman-volume-export.1.html)

Все данные платформа Гамма хранит в образе gamma_data:

![](https://gamma-wellbore.com/wp-content/uploads/2023/06/2023-06-06_16h38_26-1024x586.png)

## 13. Проверка установленной версии ПО

Для проверки версии серверной части ПО необходимо в главном окне Podman проверить логи при запуске контейнера Celery. Номер версии указывается в формате даты создания этой версии (Год, месяц, день):

![](https://gamma-wellbore.com/wp-content/uploads/2023/06/2023-06-06_16h43_58-1024x586.png)

## 14. Проверка версии OpenGL

Для проверки версии OpenGL в ОС Windows нет стандартных стредств. Необходимо установить бесплатную маленькую программу:   
OpenGL Extension Viewer ([ссылка](https://realtech-vr.com/home/glview))

Далее после установки и запуск в главном окне данного ПО будет указана версия OpenGL (требуется наличие OpenGL 4.3 и выше):

![](https://gamma-wellbore.com/wp-content/uploads/2023/06/2023-05-29_16h20_42-768x603.png)